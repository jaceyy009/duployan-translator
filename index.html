<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duployan Translator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; padding: 20px; background: #f9f9f9; }
        h1 { text-align: center; color: #222; }
        .container { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        textarea, select, button { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        button { background: #4CAF50; color: white; cursor: pointer; }
        button:hover { background: #45a049; }
        #output { background: #f0f8ff; padding: 15px; border-radius: 6px; white-space: pre-wrap; min-height: 100px; margin-top: 15px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Duployan Translator</h1>
        <p>Enter a simple sentence (English or Duployan symbols separated by spaces). Example: "Keep all the noise down" or "Keep your friends leave".</p>

        <textarea id="input" rows="4" placeholder="Type sentence here..."></textarea>

        <select id="dir">
            <option value="en2dup">English â†’ Duployan</option>
            <option value="dup2en">Duployan â†’ English</option>
        </select>

        <button onclick="translate()">Translate</button>
        <button onclick="clearAll()">Clear</button>

        <div id="output"></div>
    </div>

    <script>
        // Vocabulary - core from your PDFs + new words you requested
        const vocab = {
            // Pronouns (core)
            'i':         {dup: 'ð›±ˆ', pron: 'eeh'},
            'you':       {dup: 'ð›°‘ð›±‘', pron: 'th-u'},
            'he':        {dup: 'ð›°€ð›±†', pron: 'hee'},
            'she':       {dup: 'ð›°†ð›±†', pron: 'lee'},
            'we':        {dup: 'ð›°‰ð›±†', pron: 'vee'},
            'they':      {dup: 'ð›°‘ð›±’', pron: 'th-eu'},
            'it':        {dup: 'ð›±‹ð›°‘', pron: 'eeh-th'},

            // Verbs (core)
            'be':        {dup: 'ð›°‘ð›±', pron: 'tha'},
            'have':      {dup: 'ð›°™ð›±†', pron: 'mee'},
            'go':        {dup: 'ð›°…ð›£¼', pron: 'ko'},
            'come':      {dup: 'ð›°…ð›±ð›°™', pron: 'kam'},
            'see':       {dup: 'ð›°œð›±†', pron: 'see'},
            'say':       {dup: 'ð›°œð›±ð›°†', pron: 'sal'},
            'learn':     {dup: 'ð›°†ð›£¼ð›°š', pron: 'lon'},
            'know':      {dup: 'ð›°šð›£¼', pron: 'no'},
            'make':      {dup: 'ð›°™ð›±ð›°…', pron: 'mak'},
            'use':       {dup: 'ð›°‘ð›±•ð›°œ', pron: 'th-oos'},

            // New requested words (logical creations based on your phonotactics & patterns)
            'keep':      {dup: 'ð›°šð›±•ð›°‹', pron: 'keep'},     // using 'noo' + 'r' elements for "hold/keep"
            'down':      {dup: 'ð›°‡ð›±‘ð›°…', pron: 'buk'},       // from earlier "down" = buk
            'here':      {dup: 'ð›±ˆð›°‹', pron: 'eehr'},        // from earlier "here"
            'your':      {dup: 'ð›±†ð›°œð›£¼', pron: 'eeso'},      // possessive extension
            'leave':     {dup: 'ð›±‚ð›°„', pron: 'owuhf'},        // "leave/go away"

            // Time & more (partial - add as needed)
            'now':       {dup: 'ð›°‘', pron: 'th'},
            'before':    {dup: 'ð›°ƒð›±‚', pron: 'tow-uh'},
            'after':     {dup: 'ð›°‹ð›±', pron: 'ra'},
            'always':    {dup: 'ð›°œð›£¼ð›°†', pron: 'sol'},
            'never':     {dup: 'ð›°šð›±ð›°œ', pron: 'nas'},

            // Particles
            'past':      {dup: 'ð›°ƒð›±‚', pron: 'tow-uh'},
            'future':    {dup: 'ð›°‹ð›±', pron: 'ra'},
            'progressive': {dup: 'ð›°œð›±†', pron: 'see'}
        };

        const dupToEng = {};
        for (let key in vocab) dupToEng[vocab[key].dup] = key;

        function translate() {
            const text = document.getElementById('input').value.trim();
            const dir = document.getElementById('dir').value;
            let result = '';

            if (!text) {
                result = 'Enter a sentence first.';
            } else if (dir === 'en2dup') {
                const [dup, pron] = engToDup(text);
                result = `Duployan: ${dup}\nPronunciation: ${pron}`;
            } else {
                const eng = dupToEngF(text);
                result = `English: ${eng}`;
            }

            document.getElementById('output').textContent = result;
        }

        function clearAll() {
            document.getElementById('input').value = '';
            document.getElementById('output').textContent = '';
        }

        function engToDup(sentence) {
            let words = sentence.toLowerCase().replace(/[^\w\s]/g,'').split(/\s+/);
            let tense = 'current';
            if (words.includes('will')) tense = 'future';
            if (words.some(w => ['was','did','had','went'].includes(w))) tense = 'past';

            let subject = null, verb = null, objs = [], rest = [];

            for (let w of words) {
                if (vocab[w]) {
                    if (['i','you','he','she','we','they','it'].includes(w)) subject = w;
                    else if (!verb && ['be','have','go','come','see','say','learn','know','make','use','keep','leave'].includes(w)) verb = w;
                    else objs.push(w);
                } else rest.push(w);
            }

            if (!verb || !subject) return ['Parse failed - need subject + verb', ''];

            let dup = [vocab[tense].dup, vocab[verb].dup, vocab[subject].dup];
            if (objs.length) dup.push(objs.map(w => vocab[w]?.dup || w + '?').join(' '));

            let pron = [vocab[tense].pron, vocab[verb].pron, vocab[subject].pron];
            if (objs.length) pron.push(objs.map(w => vocab[w]?.pron || w).join(' '));

            return [dup.filter(Boolean).join(' '), pron.filter(Boolean).join(' - ')];
        }

        function dupToEngF(dupStr) {
            let tokens = dupStr.split(/\s+/).filter(t => t);
            if (tokens.length < 2) return 'Invalid input';

            let tense = dupToEng[tokens[0]] || 'current';
            let verb = dupToEng[tokens[1]] || '?';
            let subject = dupToEng[tokens[2]] || '?';
            let obj = tokens.slice(3).map(t => dupToEng[t] || t).join(' ');

            let out = `${subject} ${verb}`;
            if (obj) out += ` ${obj}`;
            if (tense === 'past') out = `${subject} did ${verb} ${obj}`;
            if (tense === 'future') out = `${subject} will ${verb} ${obj}`;

            return out.trim() || 'Translation incomplete';
        }
    </script>
</body>
</html>
