<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duployan Translator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; background-color: #f9f9f9; }
        h1 { text-align: center; color: #333; }
        .translator { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        label { display: block; margin-bottom: 10px; font-weight: bold; }
        input, select, button { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { background-color: #4CAF50; color: white; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #45a049; }
        #output { background: #f0f0f0; padding: 15px; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; }
        .vocab-table { margin-top: 30px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>Duployan Language Translator</h1>
    <div class="translator">
        <label for="inputText">Enter text to translate:</label>
        <textarea id="inputText" rows="4" placeholder="e.g., I go home"></textarea>

        <label for="direction">Translation Direction:</label>
        <select id="direction">
            <option value="eng_to_dup">English to Duployan</option>
            <option value="dup_to_eng">Duployan to English</option>
        </select>

        <button onclick="translateText()">Translate</button>

        <div id="output"></div>
    </div>

    <!-- Optional: Vocabulary Tables -->
    <div class="vocab-table">
        <h2>Core Vocabulary</h2>
        <!-- You can add HTML tables here from your PDFs, e.g., pronouns, verbs, etc. For brevity, I've omitted them, but you can copy from your README or PDFs. -->
        <p>See the repository README for full vocabulary lists.</p>
    </div>

    <script>
        // Core Vocabulary (from PDFs + generated new words)
        const coreVocab = {
            // Pronouns
            'i': { dup: 'ð›±ˆ', pron: 'eeh' },
            'you': { dup: 'ð›°‘ð›±‘', pron: 'th-u' },
            'he': { dup: 'ð›°€ð›±†', pron: 'hee' },
            'she': { dup: 'ð›°†ð›±†', pron: 'lee' },
            'we': { dup: 'ð›°‰ð›±†', pron: 'vee' },
            'they': { dup: 'ð›°‘ð›±’', pron: 'th-eu' },
            'it': { dup: 'ð›±‹ð›°‘', pron: 'eeh-th' },
            'him': { dup: 'ð›±™ð›°š', pron: '' },
            'us': { dup: 'ð›±—ð›°œ', pron: '' },
            'me': { dup: 'ð›°™ð›±‰', pron: '' },
            'her': { dup: 'ð›°—ð›°˜', pron: '' },
            'them': { dup: 'ð›°‘ð›±…', pron: '' },
            'girl': { dup: 'ð›°”ð›±‡ð›°†', pron: '' },
            'boy': { dup: 'ð›°‡ð›±ð›±‡', pron: '' },
            'male': { dup: 'ð›°™ð›±…ð›°†', pron: '' },
            'female': { dup: 'ð›°™ð›±…ð›°†ð›°„ð›±', pron: '' },

            // Verbs
            'be': { dup: 'ð›°‘ð›±', pron: 'tha' },
            'have': { dup: 'ð›°™ð›±†', pron: 'mee' },
            'go': { dup: 'ð›°…ð›±„', pron: 'ko' },
            'come': { dup: 'ð›°…ð›±ð›°™', pron: 'kam' },
            'see': { dup: 'ð›°œð›±†', pron: 'see' },
            'say': { dup: 'ð›°œð›±ð›°†', pron: 'sal' },
            'speak': { dup: 'ð›°œð›±ð›°†', pron: 'sal' },
            'learn': { dup: 'ð›°†ð›±„ð›°š', pron: 'lon' },
            'know': { dup: 'ð›°šð›±„', pron: 'no' },
            'make': { dup: 'ð›°™ð›±ð›°…', pron: 'mak' },
            'use': { dup: 'ð›°‘ð›±•ð›°œ', pron: 'th-oos' },

            // Time
            'now': { dup: 'ð›°‘', pron: 'th' },
            'before': { dup: 'ð›°ƒð›±‚', pron: 'tow-uh' },
            'after': { dup: 'ð›°‹ð›±ð›±', pron: 'ra-a' },
            'day': { dup: 'ð›°‹ð›±„', pron: 'ro' },
            'today': { dup: 'ð›°‹ð›±„ð›°‘', pron: 'ro-th' },
            'always': { dup: 'ð›°œð›±„ð›°†', pron: 'sol' },
            'never': { dup: 'ð›°šð›±ð›°œ', pron: 'nas' },

            // People
            'person': { dup: 'ð›°™ð›±†ð›°š', pron: 'meen' },
            'people': { dup: 'ð›°™ð›±†ð›°šð›°œ', pron: 'meens' },
            'man': { dup: 'ð›°™ð›±†ð›°š', pron: 'meen' },
            'woman': { dup: 'ð›°™ð›±†ð›°šð›±', pron: 'meen-wo' },
            'child': { dup: 'ð›°‡ð›±', pron: 'ban' },
            'friend': { dup: 'ð›°„ð›±†ð›°†', pron: 'feel' },

            // World & concepts
            'world': { dup: 'ð›°™ð›±„ð›°š', pron: 'mon' },
            'language': { dup: 'ð›°†ð›±ð›°œð›±†', pron: 'la-see' },
            'word': { dup: 'ð›°œð›±„ð›°‹', pron: 'sor' },
            'meaning': { dup: 'ð›°™ð›±†ð›°œ', pron: 'mees' },
            'name': { dup: 'ð›°šð›±ð›°™', pron: 'nam' },
            'truth': { dup: 'ð›°ƒð›±ð›°œ', pron: 'tas' },
            'idea': { dup: 'ð›±ð›°†ð›±†', pron: 'a-lee' },

            // Modifiers
            'good': { dup: 'ð›°„ð›±„', pron: 'fo' },
            'bad': { dup: 'ð›°„ð›±ð›°œ', pron: 'fas' },
            'big': { dup: 'ð›°…ð›±', pron: 'ka' },
            'small': { dup: 'ð›°œð›±ð›°†', pron: 'sal' },
            'new': { dup: 'ð›°šð›±•', pron: 'noo' },
            'old': { dup: 'ð›°‹ð›±„ð›°†', pron: 'rol' },

            // Function words
            'and': { dup: 'ð›°œ', pron: 's' },
            'or': { dup: 'ð›°‹', pron: 'r' },
            'not': { dup: 'ð›°š', pron: 'n' },
            'yes': { dup: 'ð›°œð›±†', pron: 'see' },
            'no': { dup: 'ð›°šð›±„', pron: 'no' },

            // Tense particles
            'past': { dup: 'ð›°ƒð›±‚', pron: 'tow-uh' },
            'current': { dup: 'ð›°‘', pron: 'th' },
            'future': { dup: 'ð›°‹ð›±', pron: 'ra' },

            // Other particles
            'progressive': { dup: 'ð›°œð›±†', pron: 'see' },
            'negation': { dup: 'ð›°”ð›±ˆ', pron: '' },
            'question': { dup: 'ð›°”ð›±', pron: '' },
            'emphasis': { dup: 'ð›°›ð›±', pron: '' },

            // New words (449 from previous generation)
            'the': { dup: 'ð›°ƒð›±•ð›°‡', pron: 'toob' },
            'of': { dup: 'ð›°ƒð›±ð›°š', pron: 'tan' },
            // ... (add all 449 here for completeness; I've truncated for brevity in this code snippet. Copy the full list from the Python script.)
            'among': { dup: 'ð›±’ð›°€ð›±’', pron: 'euheu' },
            // Note: In your actual index.html, paste the full new_vocab object here.
        };

        // Reverse vocab for Duployan to English
        const dupToEng = {};
        for (let key in coreVocab) {
            dupToEng[coreVocab[key].dup] = key;
        }

        function translateText() {
            const input = document.getElementById('inputText').value.trim();
            const direction = document.getElementById('direction').value;
            let result = '';
            let pron = '';

            if (direction === 'eng_to_dup') {
                const [dupSentence, pronSentence] = translateEnglishToDuployan(input);
                result = `Duployan: ${dupSentence}\nPronunciation: ${pronSentence}`;
            } else {
                const [engSentence] = translateDuployanToEnglish(input);
                result = `English: ${engSentence}`;
            }

            document.getElementById('output').textContent = result;
        }

        // Ported from Python: English to Duployan
        function translateEnglishToDuployan(sentence) {
            const words = sentence.toLowerCase().replace(/[.,]/g, '').split(' ');
            const tense = detectTense(words);
            let subject = null;
            let verb = null;
            let object_ = [];

            for (let w of words) {
                if (coreVocab[w]) {
                    if (!subject && ['i', 'you', 'he', 'she', 'we', 'they', 'it', 'person', 'people', 'man', 'woman', 'child', 'friend'].includes(w)) {
                        subject = w;
                    } else if (!verb && Object.keys(coreVocab).some(k => k === w && (k.startsWith('to ') || ['be', 'have', 'go'].includes(k)))) {
                        verb = w;
                    } else {
                        object_.push(w);
                    }
                }
            }

            if (!subject || !verb) return ['Unable to parse (missing subject/verb)', ''];

            const subjectDup = coreVocab[subject].dup;
            const subjectPron = coreVocab[subject].pron;
            const verbDup = coreVocab[verb].dup;
            const verbPron = coreVocab[verb].pron;
            const objectDup = object_.map(o => coreVocab[o] ? coreVocab[o].dup : '?').filter(Boolean).join(' ');
            const objectPron = object_.map(o => coreVocab[o] ? coreVocab[o].pron : '?').filter(Boolean).join('-');

            const tensePart = coreVocab[tense].dup;
            const tensePron = coreVocab[tense].pron;

            const dupSentence = [tensePart, verbDup, subjectDup, objectDup].filter(Boolean).join(' ');
            const pronSentence = [tensePron, verbPron, subjectPron, objectPron].filter(Boolean).join('-');

            return [dupSentence, pronSentence];
        }

        // Simple tense detection
        function detectTense(words) {
            if (words.some(w => ['was', 'went', 'had', 'did', 'came'].includes(w))) return 'past';
            if (words.some(w => ['will', 'would'].includes(w))) return 'future';
            return 'current';
        }

        // Ported from Python: Duployan to English
        function translateDuployanToEnglish(dupSentence) {
            const words = dupSentence.split(' ');
            if (words.length < 2) return ['Invalid Duployan sentence'];

            const tensePart = words[0];
            const verbDup = words[1];
            const subjectDup = words[2];
            const objectDup = words.slice(3).join(' ');

            const tense = Object.keys(coreVocab).find(k => coreVocab[k].dup === tensePart) || 'current';
            const verbEng = dupToEng[verbDup] || '?';
            const subjectEng = dupToEng[subjectDup] || '?';
            const objectEng = objectDup.split(' ').map(o => dupToEng[o] || '?').join(' ');

            const engSentence = `${subjectEng} ${tense === 'past' ? 'was' : tense === 'future' ? 'will' : 'is'} ${verbEng} ${objectEng}`.trim();

            return [engSentence];
        }
    </script>
</body>
</html>
